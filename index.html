<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows XP Time Tracker</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Tahoma, Geneva, sans-serif;
            font-size: 11px;
            background: #ECE9D8;
            min-height: 100vh;
            padding: 20px;
        }

        .xp-window {
            background: #ECE9D8;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }

        .xp-title-bar {
            background: linear-gradient(to bottom, #0055E5, #0044CC);
            color: white;
            padding: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .xp-button {
            background: #D4D0C8;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 5px 15px;
            font-family: Tahoma, Geneva, sans-serif;
            font-size: 11px;
            cursor: pointer;
            min-width: 75px;
        }

        .xp-button:hover {
            background: #E4E0D8;
        }

        .xp-button:active {
            border-color: #808080 #ffffff #ffffff #808080;
        }

        .timer-display {
            font-size: 48px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 20px 0;
            color: #000080;
        }

        .control-group {
            text-align: center;
            margin: 20px 0;
        }

        .xp-tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 10px;
            border-bottom: 2px solid #ffffff;
        }

        .xp-tab {
            background: #D4D0C8;
            border: 1px solid;
            border-color: #ffffff #808080 transparent #ffffff;
            padding: 5px 15px;
            cursor: pointer;
            position: relative;
            top: 2px;
        }

        .xp-tab.active {
            background: #ECE9D8;
            border-bottom-color: #ECE9D8;
        }

        .hidden {
            display: none;
        }

        select {
            background: white;
            border: 2px inset #ffffff;
            font-family: Tahoma, Geneva, sans-serif;
            font-size: 11px;
            padding: 2px;
            width: 200px;
        }

        .entry-list {
            height: 300px;
            overflow-y: auto;
            border: 2px inset #ffffff;
            background: white;
            padding: 5px;
        }

        .entry-item {
            padding: 5px;
            border-bottom: 1px solid #D4D0C8;
        }

        .data-warning {
            background: #FFF4C4;
            border: 1px solid #DDB800;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="xp-window">
        <div class="xp-title-bar">
            <span>Windows XP Time Tracker</span>
        </div>
        <div style="padding: 8px;">
            <div class="data-warning">
                ‚ö†Ô∏è Note: Data is only stored during this session. Use Export/Import to save your data permanently.
                <button class="xp-button" onclick="exportData()" style="margin-left: 10px;">‚¨á Export</button>
                <button class="xp-button" onclick="document.getElementById('fileInput').click()">‚¨Ü Import</button>
                <input type="file" id="fileInput" accept=".json" onchange="importData(event)" style="display: none;">
            </div>

            <div class="xp-tabs">
                <button class="xp-tab active" onclick="switchTab('timer')">üïê Timer</button>
                <button class="xp-tab" onclick="switchTab('pomodoro')">üïê Pomodoro</button>
                <button class="xp-tab" onclick="switchTab('data')">üìä Data</button>
            </div>

            <!-- Timer Tab -->
            <div id="timer-tab" class="tab-content">
                <div style="margin: 20px 0;">
                    <label>Category: </label>
                    <select id="timer-category" onchange="updateProjects('timer')">
                        <option value="Work">Work</option>
                        <option value="Personal">Personal</option>
                    </select>
                    
                    <label style="margin-left: 20px;">Project: </label>
                    <select id="timer-project">
                        <option value="undefined">undefined</option>
                        <option value="Project A">Project A</option>
                        <option value="Project B">Project B</option>
                    </select>
                </div>

                <div class="timer-display" id="timer-display">00:00:00</div>
                
                <div class="control-group">
                    <button class="xp-button" id="timer-btn" onclick="toggleTimer()">‚ñ∂ Start</button>
                </div>
            </div>

            <!-- Pomodoro Tab -->
            <div id="pomodoro-tab" class="tab-content hidden">
                <div style="margin: 20px 0;">
                    <label>Category: </label>
                    <select id="pomo-category" onchange="updateProjects('pomo')">
                        <option value="Work">Work</option>
                        <option value="Personal">Personal</option>
                    </select>
                    
                    <label style="margin-left: 20px;">Project: </label>
                    <select id="pomo-project">
                        <option value="undefined">undefined</option>
                        <option value="Project A">Project A</option>
                        <option value="Project B">Project B</option>
                    </select>
                </div>

                <div class="timer-display" id="pomo-display">25:00</div>
                
                <div class="control-group">
                    <button class="xp-button" onclick="togglePomodoro()">‚ñ∂ Start</button>
                    <button class="xp-button" onclick="resetPomodoro()">‚èπ Reset</button>
                </div>
            </div>

            <!-- Data Tab -->
            <div id="data-tab" class="tab-content hidden">
                <h3>Time Entries</h3>
                <div class="entry-list" id="entry-list">
                    <p>No entries yet. Start tracking time to see data here.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let timerRunning = false;
        let timerStart = null;
        let timerInterval = null;
        let pomodoroRunning = false;
        let pomodoroTime = 25 * 60;
        let pomodoroInterval = null;
        let entries = [];

        // Categories and projects
        const categories = {
            'Work': ['undefined', 'Project A', 'Project B'],
            'Personal': ['undefined', 'Exercise', 'Reading']
        };

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.xp-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Update data tab if needed
            if (tabName === 'data') {
                updateDataDisplay();
            }
        }

        // Update projects dropdown
        function updateProjects(type) {
            const categorySelect = document.getElementById(type + '-category');
            const projectSelect = document.getElementById(type + '-project');
            const selectedCategory = categorySelect.value;
            
            // Clear current options
            projectSelect.innerHTML = '';
            
            // Add new options
            categories[selectedCategory].forEach(project => {
                const option = document.createElement('option');
                option.value = project;
                option.textContent = project;
                projectSelect.appendChild(option);
            });
        }

        // Timer functions
        function toggleTimer() {
            if (!timerRunning) {
                startTimer();
            } else {
                stopTimer();
            }
        }

        function startTimer() {
            timerRunning = true;
            timerStart = Date.now();
            document.getElementById('timer-btn').textContent = '‚èπ Stop';
            
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function stopTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            
            // Save entry
            const duration = Math.floor((Date.now() - timerStart) / 1000);
            const entry = {
                id: Date.now(),
                type: 'timer',
                category: document.getElementById('timer-category').value,
                project: document.getElementById('timer-project').value,
                startTime: new Date(timerStart).toISOString(),
                endTime: new Date().toISOString(),
                duration: duration
            };
            entries.push(entry);
            
            // Reset display
            document.getElementById('timer-display').textContent = '00:00:00';
            document.getElementById('timer-btn').textContent = '‚ñ∂ Start';
        }

        function updateTimerDisplay() {
            const elapsed = Math.floor((Date.now() - timerStart) / 1000);
            document.getElementById('timer-display').textContent = formatTime(elapsed);
        }

        // Pomodoro functions
        function togglePomodoro() {
            if (!pomodoroRunning) {
                pomodoroRunning = true;
                pomodoroInterval = setInterval(updatePomodoroDisplay, 1000);
            } else {
                pomodoroRunning = false;
                clearInterval(pomodoroInterval);
            }
        }

        function resetPomodoro() {
            pomodoroRunning = false;
            clearInterval(pomodoroInterval);
            pomodoroTime = 25 * 60;
            document.getElementById('pomo-display').textContent = '25:00';
        }

        function updatePomodoroDisplay() {
            pomodoroTime--;
            if (pomodoroTime <= 0) {
                // Complete
                pomodoroRunning = false;
                clearInterval(pomodoroInterval);
                
                // Save entry
                const entry = {
                    id: Date.now(),
                    type: 'pomodoro',
                    category: document.getElementById('pomo-category').value,
                    project: document.getElementById('pomo-project').value,
                    startTime: new Date(Date.now() - 25 * 60 * 1000).toISOString(),
                    endTime: new Date().toISOString(),
                    duration: 25 * 60
                };
                entries.push(entry);
                
                // Reset
                pomodoroTime = 25 * 60;
                document.getElementById('pomo-display').textContent = '25:00';
                
                // Play sound
                try {
                    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn');
                    audio.play();
                } catch (e) {}
            } else {
                const mins = Math.floor(pomodoroTime / 60);
                const secs = pomodoroTime % 60;
                document.getElementById('pomo-display').textContent = 
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
        }

        // Format time helper
        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // Update data display
        function updateDataDisplay() {
            const list = document.getElementById('entry-list');
            
            if (entries.length === 0) {
                list.innerHTML = '<p>No entries yet. Start tracking time to see data here.</p>';
                return;
            }
            
            list.innerHTML = '';
            entries.forEach(entry => {
                const div = document.createElement('div');
                div.className = 'entry-item';
                div.innerHTML = `
                    <strong>${entry.category} - ${entry.project}</strong><br>
                    ${new Date(entry.startTime).toLocaleString()} (${formatTime(entry.duration)})<br>
                    Type: ${entry.type}
                `;
                list.appendChild(div);
            });
        }

        // Export/Import functions
        function exportData() {
            const data = {
                entries: entries,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `time-tracker-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.entries) {
                            entries = data.entries;
                            alert('Data imported successfully!');
                        }
                    } catch (err) {
                        alert('Invalid file format');
                    }
                };
                reader.readAsText(file);
            }
        }
    </script>
</body>
</html>
